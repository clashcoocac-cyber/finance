{% extends "../base.html" %}
{% block title %}Boshliq Dashboard{% endblock %}

{% block content %}
<h2 class="mt-3">Boshliq Dashboard</h2>
<div class="row my-4">
    <div class="col-md-4">
        <div class="card text-white bg-success mb-3">
            <div class="card-header">Umumiy Kirim</div>
            <div class="card-body">
                <h3 class="card-title">200 00{{ total_income|default:0 }} so'm</h3>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-danger mb-3">
            <div class="card-header">Umumiy Chiqim</div>
            <div class="card-body">
                <h3 class="card-title">{{ total_expense|default:0 }} so'm</h3>
            </div>
        </div>
    </div>
</div>
<div class="row my-4">
    <div class="col-md-6">
        <h4 style="font-weight: 400 !important;">Компаниялар</h4>
        <ul class="list-group">
        {% for company in companies %}
            <li class="list-group-item">{{ company.name }} ({{ company.address }})</li>
        {% empty %}
            <li class="list-group-item">Kompaniya yo'q</li>
        {% endfor %}
        </ul>
    </div>
    <div class="col-md-6">
        <h4>Фойдаланувчилар</h4>
        <ul class="list-group">
        {% for user in users %}
            <li class="list-group-item">
                {{ user.get_full_name }} ({{ user.get_role_display }}) - {{ user.username }}
            </li>
        {% empty %}
            <li class="list-group-item">Foydalanuvchi yo'q</li>
        {% endfor %}
        </ul>
    </div>
</div>
<div class="row my-4">
    <div class="col-12">
        <h4>So'nggi 10 hisobot</h4>
        <table class="table table-striped">
            <tr>
                <th>Sana</th>
                <th>Operator</th>
                <th>Kompaniya</th>
                <th>Holat</th>
            </tr>
            {% for report in reports %}
            <tr>
                <td>{{ report.date }}</td>
                <td>{{ report.operator.get_full_name }}</td>
                <td>{{ report.company.name }}</td>
                <td>
                    {% if report.is_closed %}
                        <span class="badge bg-success">Yopilgan</span>
                    {% else %}
                        <span class="badge bg-warning">Ochiq</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">Hisobot yo'q</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>
{% endblock %}